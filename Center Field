source("SMT_Data_Starter_2025.R")

library(sportyR)


#filtering for when the center field acquire the ball
game_event_field <- game_events %>%
  filter(player_position %in% c(8), event_code == 2) %>%
  collect()


#seeing the timestamps where center field acquires the ball
acquired_timestamps <- game_event_field$timestamp

#filtering for those timestamps, only the pitcher, and seeing where they are on the field (field_x, field_y). Need to make it numeric.
player_pos_center <- player_pos %>%
  #filter(HomeTeam == "RZQ") %>%
  filter(timestamp %in% acquired_timestamps) %>%
  filter(player_position == 1) %>%
  select(field_x,field_y) %>%
  mutate(field_x = as.numeric(field_x), field_y = as.numeric(field_y)) %>%
  collect()


#plotting
player_pos_center %>%
  ggplot(aes(x = field_x, y = field_y)) +
  geom_point() 

test_player_pos <- player_pos %>%
  head(10) %>%
  collect
#plotting using the sportyR package. 
player_pos_center %>%
  geom_baseball(league = "MiLB", display_range = "full") +
  geom_point(data = player_pos_acquire,
             aes(x = field_x, y = field_y, color = "white"))
